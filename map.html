<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />

  <meta
    name="viewport"
    content="
      width=device-width,
      initial-scale=1.0,
      minimum-scale=1.0,
      maximum-scale=1.0,
      user-scalable=no,
      viewport-fit=cover,
      shrink-to-fit=no
    "
  />

  <title>Map</title>

  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      /* ğŸ”’ 2. é˜²æ­¢é»æ“Šé«˜äº® (é¸å–æ™‚çš„è—è‰²å€å¡Š) */
      -webkit-tap-highlight-color: transparent;
    }

    html, body {
      width: 100%;
      height: 100%;
      overflow: hidden;
      /* ğŸ”’ 3. ç¦æ­¢æ©¡çš®ç­‹æ•ˆæœ */
      overscroll-behavior: none;
      /* ğŸ”’ 4. é—œéµï¼šå…¨åŸŸç¦æ­¢ç€è¦½å™¨é è¨­æ‰‹å‹¢ */
      touch-action: none;
    }

    body {
      background-color: #f5f5f5;
      display: flex;
      flex-direction: column;
      min-height: 100dvh;
    }

    .map-container {
      flex: 1 1 auto;
      width: 100%;
      position: relative; /* ç¢ºä¿ iframe å®šä½æº–ç¢º */
      
      /* ğŸ”´ é—œéµä¿®æ­£ï¼š
       åŸä»£ç¢¼æœ‰ pinch-zoomï¼Œé€™æœƒå…è¨±ç€è¦½å™¨ä»‹å…¥ç¸®æ”¾ã€‚
       æ”¹ç‚º 'none'ï¼Œè®“ iframe å…§éƒ¨çš„ Google Map è‡ªå·±è™•ç†ç¸®æ”¾ï¼Œ
       ç€è¦½å™¨ä¸è¦å°å®¹å™¨åšä»»ä½•å‹•ä½œã€‚
      */
      touch-action: none; 
    }

    .map-container iframe {
      width: 100%;
      height: 100%;
      border: none;
      display: block;
      /* ç¢ºä¿ iframe ä¹Ÿèƒ½åƒåˆ°ä¸€äº›è§¸æ§å±¬æ€§ (è¦–ç€è¦½å™¨æ”¯æ´åº¦) */
      touch-action: none;
    }

    .map-link {
      flex: 0 0 50px;
      width: 100%;
      height: 50px;
      background-color: rgba(0, 0, 0, 0.8);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 1000;
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      
      /* æŒ‰éˆ•å€åŸŸä¸éœ€è¦ç¸®æ”¾ï¼Œä½†å¯èƒ½éœ€è¦é»æ“Šï¼Œè¨­ç‚º manipulation æˆ– auto */
      touch-action: manipulation;
    }

    .map-link a {
      color: white;
      text-decoration: none;
      font-size: 16px;
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
      transition: color 0.3s ease;
      /* å¢å¤§é»æ“Šå€åŸŸï¼Œæå‡æ‰‹æ©Ÿé«”é©— */
      padding: 10px 20px; 
    }

    .map-link a:hover {
      color: #C6A300;
    }
  </style>

  <script async src="https://www.googletagmanager.com/gtag/js?id=G-EZTW98Q8GK"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){ dataLayer.push(arguments); }
    gtag('js', new Date());
    gtag('config', 'G-EZTW98Q8GK');
  </script>
</head>

<body>
  <div class="map-container">
    <iframe
      src="https://www.google.com/maps/d/u/0/embed?mid=11twLLP7pK2SMFY7x_0Xl_rDlWOA&ehbc=2E312F"
      title="å…¨è¢å¹•åµŒå…¥åœ°åœ–"
      loading="lazy"
      referrerpolicy="no-referrer-when-downgrade"
      allowfullscreen
    ></iframe>
  </div>

  <div class="map-link">
    <a
      href="https://www.google.com/maps/d/u/0/edit?mid=11twLLP7pK2SMFY7x_0Xl_rDlWOA&usp=sharing"
      target="_blank"
      rel="noopener noreferrer"
    >
      Open Google MAP
    </a>
  </div>

  <script>
    // ä½¿ç”¨ passive: false è®“ preventDefault() ç”Ÿæ•ˆ
    const listenerOpts = { passive: false, capture: true };

    // 1. ç¦æ­¢ iOS Safari çš„é›™æŒ‡ç¸®æ”¾ (Gesture äº‹ä»¶)
    // é€™æ˜¯æœ€é—œéµçš„éƒ¨åˆ†ï¼Œé‡å° "ä¸€æŒ‡æŒ‰ä½ã€å¦ä¸€æŒ‡ç§»å‹•" é€™é¡æ“ä½œ
    document.addEventListener('gesturestart', (e) => {
      e.preventDefault();
      // åœ¨ gesture æœŸé–“ç¦æ­¢ä»»ä½•ç¸®æ”¾è¡Œç‚º
      document.body.style.zoom = 0.99; 
    }, listenerOpts);

    document.addEventListener('gesturechange', (e) => {
      e.preventDefault();
    }, listenerOpts);

    document.addEventListener('gestureend', (e) => {
      e.preventDefault();
      document.body.style.zoom = 1;
    }, listenerOpts);


    // 2. ç¦æ­¢å¤šæŒ‡è§¸æ§ (Touch äº‹ä»¶)
    document.addEventListener('touchstart', (e) => {
      // å¦‚æœè§¸æ§é»å¤§æ–¼ 1 å€‹ï¼Œç›´æ¥ç¦æ­¢ï¼Œé˜²æ­¢é›™æŒ‡ç¸®æ”¾/æ—‹è½‰
      if (e.touches.length > 1) {
        e.preventDefault();
      }
    }, listenerOpts);

    document.addEventListener('touchmove', (e) => {
      // å¦‚æœè§¸æ§é»å¤§æ–¼ 1 å€‹ï¼Œç¦æ­¢ç§»å‹•ï¼Œé˜²æ­¢é é¢è¢«æ‹–æ‹‰ç¸®æ”¾
      if (e.touches.length > 1) {
        e.preventDefault();
      }
    }, listenerOpts);


    // 3. ç¦æ­¢é›™æ“Šæ”¾å¤§ (Double Tap)
    let lastTouchEnd = 0;
    document.addEventListener('touchend', (e) => {
      const now = Date.now();
      if (now - lastTouchEnd <= 300) {
        e.preventDefault();
      }
      lastTouchEnd = now;
    }, listenerOpts);


    // 4. (é¸ç”¨) é‡å° iframe é‚Šç•Œå˜—è©¦é˜»æ­¢äº‹ä»¶å†’æ³¡
    // é›–ç„¶ç„¡æ³•æ§åˆ¶ iframe å…§éƒ¨ï¼Œä½†å¯ä»¥ç¢ºä¿ iframe å®¹å™¨æœ¬èº«ä¸å‚³éäº‹ä»¶
    const mapContainer = document.querySelector('.map-container');
    mapContainer.addEventListener('touchmove', (e) => {
       // å¦‚æœæ˜¯å–®æŒ‡ï¼Œå…è¨±åœ°åœ–é‹ä½œï¼›å¦‚æœæ˜¯å¤šæŒ‡ï¼Œå†æ¬¡ç¢ºä¿ç¦æ­¢
       if (e.touches.length > 1) {
         e.preventDefault();
       }
    }, listenerOpts);

  </script>
</body>
</html>